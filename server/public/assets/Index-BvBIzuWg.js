import{_ as b,g as c,a as h,b as s,h as t,r as a,w as i,f as w,j as y,o as V,p as x,s as k}from"./index-Dm6bEu_Y.js";import{a as S}from"./index-ngrFHoWO.js";const C={class:"login-page"},I={class:"login-container"},N={class:"logo-area"},$={style:{margin:"24px 16px"}},j={class:"action-links"},B={__name:"Index",setup(T){const d=y(),p=c(""),u=c(""),_=async n=>{var e,l;try{const o=await S.post("/api/login",{phone:n.phone,password:n.password});o.data.success&&(x("登录成功"),localStorage.setItem("user",JSON.stringify(o.data.user)),o.data.user.role==="admin"?d.push("/admin"):d.push("/mine"))}catch(o){console.error(o),k(((l=(e=o.response)==null?void 0:e.data)==null?void 0:l.message)||"登录失败")}};return(n,e)=>{const l=a("van-nav-bar"),o=a("van-image"),m=a("van-field"),v=a("van-cell-group"),f=a("van-button"),g=a("van-form");return V(),h("div",C,[s(l,{title:"登录","left-arrow":"",onClickLeft:e[0]||(e[0]=r=>n.$router.back())}),t("div",I,[t("div",N,[s(o,{round:"",width:"80",height:"80",src:"https://fastly.jsdelivr.net/npm/@vant/assets/cat.jpeg"}),e[4]||(e[4]=t("h2",{class:"app-title"},"低空综合服务平台",-1))]),s(g,{onSubmit:_},{default:i(()=>[s(v,{inset:""},{default:i(()=>[s(m,{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=r=>p.value=r),name:"phone",label:"账号",placeholder:"请输入账号",rules:[{required:!0,message:"请填写账号"}]},null,8,["modelValue"]),s(m,{modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=r=>u.value=r),type:"password",name:"password",label:"密码",placeholder:"请输入密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"])]),_:1}),t("div",$,[s(f,{round:"",block:"",type:"primary","native-type":"submit"},{default:i(()=>[...e[5]||(e[5]=[w(" 登录 ",-1)])]),_:1})])]),_:1}),t("div",j,[t("span",{onClick:e[3]||(e[3]=r=>n.$router.push("/register"))},"注册账号")])])])}}},E=b(B,[["__scopeId","data-v-d4634b44"]]);export{E as default};
