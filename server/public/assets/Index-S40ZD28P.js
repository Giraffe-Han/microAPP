import{_ as w,g as l,a as x,b as s,h as c,r as n,w as d,f as y,j as h,o as k,p as S,s as q}from"./index-Dm6bEu_Y.js";import{a as I}from"./index-ngrFHoWO.js";const N={class:"register-page"},U={class:"register-container"},B={style:{margin:"24px 16px"}},C={__name:"Index",setup(P){const v=h(),m=l(""),p=l(""),u=l(""),i=l(""),_=t=>t===u.value,f=async t=>{var e,r;try{const a=await I.post("/api/register",{name:t.name,phone:t.phone,password:t.password});a.data.success&&(S("注册成功"),localStorage.setItem("user",JSON.stringify(a.data.user)),v.push("/mine"))}catch(a){console.error(a),q(((r=(e=a.response)==null?void 0:e.data)==null?void 0:r.message)||"注册失败")}};return(t,e)=>{const r=n("van-nav-bar"),a=n("van-field"),g=n("van-cell-group"),b=n("van-button"),V=n("van-form");return k(),x("div",N,[s(r,{title:"注册账号","left-arrow":"",onClickLeft:e[0]||(e[0]=o=>t.$router.back())}),c("div",U,[s(V,{onSubmit:f},{default:d(()=>[s(g,{inset:""},{default:d(()=>[s(a,{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=o=>m.value=o),name:"name",label:"昵称",placeholder:"请输入昵称",rules:[{required:!0,message:"请填写昵称"}]},null,8,["modelValue"]),s(a,{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=o=>p.value=o),name:"phone",label:"手机号",placeholder:"请输入手机号",rules:[{required:!0,message:"请填写手机号"}]},null,8,["modelValue"]),s(a,{modelValue:u.value,"onUpdate:modelValue":e[3]||(e[3]=o=>u.value=o),type:"password",name:"password",label:"密码",placeholder:"请输入密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"]),s(a,{modelValue:i.value,"onUpdate:modelValue":e[4]||(e[4]=o=>i.value=o),type:"password",name:"confirmPassword",label:"确认密码",placeholder:"请再次输入密码",rules:[{required:!0,message:"请再次输入密码"},{validator:_,message:"两次输入密码不一致"}]},null,8,["modelValue","rules"])]),_:1}),c("div",B,[s(b,{round:"",block:"",type:"primary","native-type":"submit"},{default:d(()=>[...e[5]||(e[5]=[y(" 注册并登录 ",-1)])]),_:1})])]),_:1})])])}}},j=w(C,[["__scopeId","data-v-504a6b0f"]]);export{j as default};
