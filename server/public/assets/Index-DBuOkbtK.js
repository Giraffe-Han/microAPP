import{a as q}from"./index-ngrFHoWO.js";import{_ as z,g as v,k as E,a as S,b as e,h as s,e as f,r as c,d as x,t as r,w as C,l as A,m as w,j as G,o as m}from"./index-Dm6bEu_Y.js";import{s as _,a as J}from"./function-call-BLKNEYCR.js";const L={class:"mine-page page-container"},M={class:"user-card"},O={class:"user-info"},R={class:"user-name"},T={class:"user-phone"},U={class:"stats-grid"},H={class:"stat-item"},K={class:"stat-value"},P={class:"stat-item"},W={class:"stat-value"},X={class:"stat-item"},Y={class:"stat-value"},Z={class:"menu-section"},tt={class:"menu-section"},st={key:0,class:"menu-section"},et={__name:"Index",setup(ot){const B=G(),p=v(0),h=v(0),g=v(0),o=v(null),u=async a=>{if(!a){p.value=0,h.value=0,g.value=0;return}try{const l=(await q.get("/api/list",{params:{userId:a}})).data||[];p.value=l.length,h.value=l.filter(i=>i.status==="处理中").length,g.value=l.filter(i=>i.status==="已完成").length}catch(t){console.error("Failed to fetch stats:",t)}},I=()=>{o.value||B.push("/login")},N=()=>{J({title:"提示",message:"确定要退出登录吗？"}).then(()=>{localStorage.removeItem("user"),o.value=null,u(null),w("已退出登录")}).catch(()=>{})};E(()=>{const a=localStorage.getItem("user");if(a)try{o.value=JSON.parse(a),u(o.value.id)}catch(t){console.error(t),u(null)}else u(null)});const j=()=>{_({title:"服务指南",message:`1. 选择所需服务
2. 填写申请表单
3. 提交申请
4. 等待客服联系
5. 确认服务详情
6. 服务执行`})},D=()=>{_({title:"常见问题",message:`Q: 申请后多久联系？
A: 2小时内会有客服联系您

Q: 如何修改申请？
A: 请联系客服进行修改`})},Q=()=>{_({title:"联系客服",message:`客服电话：400-123-4567
工作时间：工作日 9:00-18:00`})},V=()=>{_({title:"关于我们",message:`低空综合服务平台
开发主体：温州低空经济发展有限公司
版本：v1.1.0

专注于提供专业、高效、安全的低空服务`})};return(a,t)=>{var b,y,$;const l=c("van-nav-bar"),i=c("van-image"),F=c("van-icon"),n=c("van-cell"),k=c("van-cell-group");return m(),S("div",L,[e(l,{title:"个人中心",fixed:"",placeholder:""}),s("div",M,[s("div",{class:"user-header",onClick:I},[e(i,{round:"",width:"60",height:"60",src:((b=o.value)==null?void 0:b.avatar)||"https://fastly.jsdelivr.net/npm/@vant/assets/cat.jpeg"},null,8,["src"]),s("div",O,[s("h2",R,r(((y=o.value)==null?void 0:y.name)||"点击登录"),1),s("p",T,r((($=o.value)==null?void 0:$.phone)||"登录后享受更多服务"),1)]),o.value?f("",!0):(m(),x(F,{key:0,name:"arrow",size:"16",color:"#fff"}))]),s("div",U,[s("div",H,[s("div",K,r(p.value),1),t[5]||(t[5]=s("div",{class:"stat-label"},"总申请",-1))]),s("div",P,[s("div",W,r(h.value),1),t[6]||(t[6]=s("div",{class:"stat-label"},"处理中",-1))]),s("div",X,[s("div",Y,r(g.value),1),t[7]||(t[7]=s("div",{class:"stat-label"},"已完成",-1))])])]),s("div",Z,[e(k,{inset:""},{default:C(()=>[o.value&&o.value.role==="admin"?(m(),x(n,{key:0,title:"后台管理",icon:"setting-o","is-link":"",onClick:t[0]||(t[0]=d=>a.$router.push("/admin"))})):f("",!0),e(n,{title:"我的申请",icon:"records","is-link":"",onClick:t[1]||(t[1]=d=>a.$router.push("/applications"))}),e(n,{title:"案例展示",icon:"video-o","is-link":"",onClick:t[2]||(t[2]=d=>a.$router.push("/cases"))}),e(n,{title:"个人信息",icon:"contact","is-link":"",onClick:t[3]||(t[3]=d=>A(w)("功能开发中"))}),e(n,{title:"实名认证",icon:"shield-o","is-link":"",label:"未认证",onClick:t[4]||(t[4]=d=>A(w)("功能开发中"))})]),_:1})]),s("div",tt,[e(k,{inset:""},{default:C(()=>[e(n,{title:"服务指南",icon:"guide-o","is-link":"",onClick:j}),e(n,{title:"常见问题",icon:"question-o","is-link":"",onClick:D}),e(n,{title:"联系客服",icon:"service-o","is-link":"",onClick:Q}),e(n,{title:"关于我们",icon:"info-o","is-link":"",onClick:V})]),_:1})]),o.value?(m(),S("div",st,[e(k,{inset:""},{default:C(()=>[e(n,{title:"退出登录",icon:"close","is-link":"",onClick:N})]),_:1})])):f("",!0)])}}},it=z(et,[["__scopeId","data-v-022b34d4"]]);export{it as default};
