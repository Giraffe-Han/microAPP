import{a as Q}from"./index-ngrFHoWO.js";import{_ as W,g as r,a as c,b as o,h as e,r as u,w as _,F as j,i as C,e as L,t as v,o as t,d as N,f as P}from"./index-Dm6bEu_Y.js";const X={class:"cases-page"},Y={class:"page-content"},Z={class:"cases-container"},I=["onClick"],ee={class:"case-cover"},ae=["src","alt"],se={key:1,class:"video-cover"},te=["src"],oe={class:"play-icon"},ie={class:"type-tag"},le={class:"case-info"},ne={class:"case-title"},ce={class:"case-desc"},de={class:"case-meta"},re={class:"meta-item"},ue={class:"meta-item"},ve={key:0,class:"detail-content"},pe={class:"detail-title"},_e={key:0,class:"media-item"},he=["src","alt"],ye={key:1,class:"media-item video-item"},fe=["src"],ge={class:"detail-info"},me={class:"info-row"},ke={class:"info-value"},be={class:"info-row"},we={class:"info-value"},xe={class:"info-row"},je={class:"info-value"},Ce={class:"detail-description"},De={class:"description-text"},Te={key:0,class:"detail-highlights"},Ve={__name:"Index",setup(Be){const D=r([{id:0,name:"全部案例"},{id:1,name:"无人机物流"},{id:4,name:"无人机吊运"},{id:5,name:"航空表演"}]),w=r(0),T=r(!1),d=r(null),m=[{id:1764231459722,categoryId:5,title:"泰顺无人机表演",description:"5月20日晚，泰顺县文祥湖公园的夜空被1999架无人机点亮，一场以“欢顺520”为主题的无人机灯光秀在此震撼上演。",location:"泰顺县文祥湖公园",date:"2025-05-20",views:"2.3k",service:"航空表演",coverType:"image",cover:"/uploads/taishun-perf-cover.jpg",media:[{type:"video",url:"/uploads/taishun-perf-video.mp4"}],fullDescription:'这场由温州交运集团所属低空公司、浙江顺翼泰翔低空经济有限公司联合泰顺县文化和广电旅游体育局共同打造的视觉盛宴，以天为幕、以光为笔，在高空书写了一封跨越半个多世纪的"时光情书"，用动态光影演绎"执子之手，与子偕老"的深情承诺，为这座浙南山城增添了一抹动人心魄的浪漫注脚。',highlights:["1999架无人机编队","文祥湖夜空首秀","欢顺520主题"]},{id:1,categoryId:1,title:"江心屿无人机外卖配送",description:"江心屿无人机外卖航线，极速送达，空投德克士、永和豆浆等多家外卖",location:"江心屿",date:"2025-10-01",views:"1.2k",service:"无人机物流服务",coverType:"image",cover:"/uploads/jiangxinyu-cover.jpg",media:[{type:"image",url:"/uploads/jiangxinyu-cover.jpg"},{type:"image",url:"/uploads/jiangxinyu-1.jpg"},{type:"video",url:"/uploads/jiangxinyu-video.mp4",poster:"/uploads/jiangxinyu-cover.jpg"}],fullDescription:"为缓解假期游客密集导致的就餐难等问题，温州交运集团所属低空公司在江心屿创新推出无人机外卖配送服务，以“宋街起飞、九曲桥草坪降落”的双节点布局，在景区内打造“低空物流”内循环。“相比传统地面配送，无人机配送效率提升了近70%，单次能装下2—3份餐食，有效解决配送慢、取餐难等问题。”低空公司一位负责人说，此次在江心屿推出无人机外卖配送服务，进一步探索了“低空物流+景区内循环”的可复制场景，为景区服务增添科技温度。",highlights:["10分钟极速送达，效率提升300%","精准定位空投柜，取餐更方便","覆盖永和豆浆、德克士等种商品","无接触配送，科技感十足"]},{id:4,categoryId:4,title:"泰顺杨梅采摘",description:"偏远山区农产品无人机空运，解决传统运输方式运输难题",location:"泰顺山区",date:"2025-06-24",views:"1.8k",service:"无人机吊运服务",coverType:"image",cover:"/uploads/taishun-bayberry-cover.jpg",media:[{type:"image",url:"/uploads/taishun-bayberry-cover.jpg"},{type:"image",url:"/uploads/taishun-bayberry-1.jpg"},{type:"image",url:"/uploads/taishun-bayberry-2.jpg"},{type:"video",url:"/uploads/taishun-bayberry-video.mp4"}],fullDescription:"偏远山区，道路崎岖，传统载具运输困难。使用大型吊运无人机，成功杨梅进行吊装配送",highlights:["突破地形限制，吊运能力强","精准定位，误差小于10cm","降低成本40%，缩短工期60%","零安全事故，施工人员零风险"]}],p=r([...m]),k=r(1),h=r(!1),b=r(!1),y=r(!1),U=async()=>{try{const i=D.value[w.value].id;let a=[];i===0?a=m:a=m.filter(f=>f.categoryId===i);const g=await Q.get("/api/cases",{params:{page:k.value,limit:10,categoryId:i}});let l=g.data.data||[];const B=new Set(a.map(f=>f.id));l=l.filter(f=>!B.has(f.id)),y.value?(p.value=[...a,...l],y.value=!1):k.value===1?p.value=[...a,...l]:p.value=[...p.value,...l],h.value=!1,(g.data.data||[]).length<10?b.value=!0:k.value++}catch(i){console.error("Failed to fetch cases:",i);const a=D.value[w.value].id;a===0?p.value=m:p.value=m.filter(g=>g.categoryId===a),h.value=!1,y.value=!1,b.value=!0}},V=()=>{y.value||U()},$=()=>{b.value=!1,h.value=!0,k.value=1,V()},E=()=>{p.value=[],k.value=1,b.value=!1,h.value=!0,V()},F=i=>{console.log("Clicked case item:",i),d.value=i,T.value=!0},R=r(null),x=r(3e3),S=()=>{x.value=0},z=()=>{x.value=3e3},M=()=>{var i;x.value=3e3,(i=R.value)==null||i.next()};return(i,a)=>{const g=u("van-nav-bar"),l=u("van-icon"),B=u("van-tag"),f=u("van-list"),q=u("van-pull-refresh"),A=u("van-empty"),G=u("van-tab"),H=u("van-tabs"),J=u("van-swipe-item"),K=u("van-swipe"),O=u("van-popup");return t(),c("div",X,[o(g,{title:"案例展示","left-arrow":"",onClickLeft:a[0]||(a[0]=n=>i.$router.back()),fixed:"",placeholder:""}),e("div",Y,[o(H,{active:w.value,"onUpdate:active":a[3]||(a[3]=n=>w.value=n),sticky:"","offset-top":"46",color:"#667eea",onChange:E},{default:_(()=>[(t(!0),c(j,null,C(D.value,n=>(t(),N(G,{key:n.id,title:n.name},{default:_(()=>[e("div",Z,[o(q,{modelValue:y.value,"onUpdate:modelValue":a[2]||(a[2]=s=>y.value=s),onRefresh:$},{default:_(()=>[o(f,{loading:h.value,"onUpdate:loading":a[1]||(a[1]=s=>h.value=s),finished:b.value,"finished-text":"没有更多了",onLoad:V},{default:_(()=>[(t(!0),c(j,null,C(p.value,s=>(t(),c("div",{key:s.id,class:"case-card",onClick:Le=>F(s)},[e("div",ee,[s.coverType==="image"?(t(),c("img",{key:0,src:s.cover,alt:s.title},null,8,ae)):(t(),c("div",se,[e("video",{src:s.cover,muted:"",loop:"",playsinline:"","webkit-playsinline":"","x5-playsinline":"",preload:"metadata",style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,te),e("div",oe,[o(l,{name:"play",size:"24"})])])),e("div",ie,[o(B,{type:s.coverType==="video"?"primary":"success",size:"medium"},{default:_(()=>[P(v(s.coverType==="video"?"视频":"图片"),1)]),_:2},1032,["type"])])]),e("div",le,[e("h3",ne,v(s.title),1),e("p",ce,v(s.description),1),e("div",de,[e("span",re,[o(l,{name:"clock-o"}),P(" "+v(s.date),1)]),e("span",ue,[o(l,{name:"eye-o"}),P(" "+v(s.views),1)])])])],8,I))),128))]),_:1},8,["loading","finished"])]),_:1},8,["modelValue"]),!h.value&&!y.value&&p.value.length===0?(t(),N(A,{key:0,description:"暂无案例",image:"search"})):L("",!0)])]),_:1},8,["title"]))),128))]),_:1},8,["active"])]),o(O,{show:T.value,"onUpdate:show":a[4]||(a[4]=n=>T.value=n),position:"bottom",style:{height:"90%"},round:"",closeable:"","close-icon":"close"},{default:_(()=>[d.value?(t(),c("div",ve,[e("h2",pe,v(d.value.title),1),o(K,{ref_key:"swipeRef",ref:R,autoplay:x.value,loop:!0,"indicator-color":"#667eea",class:"media-swiper"},{default:_(()=>[(t(!0),c(j,null,C(d.value.media,(n,s)=>(t(),N(J,{key:s},{default:_(()=>[n.type==="image"?(t(),c("div",_e,[e("img",{src:n.url,alt:`案例图片${s+1}`},null,8,he)])):(t(),c("div",ye,[e("video",{src:n.url,controls:"",preload:"metadata",playsinline:"","webkit-playsinline":"","x5-playsinline":"",onPlay:S,onPause:z,onEnded:M}," 您的浏览器不支持视频播放 ",40,fe)]))]),_:2},1024))),128))]),_:1},8,["autoplay"]),e("div",ge,[e("div",me,[o(l,{name:"bookmark-o",color:"#667eea"}),a[5]||(a[5]=e("span",{class:"info-label"},"服务类型：",-1)),e("span",ke,v(d.value.service),1)]),e("div",be,[o(l,{name:"location-o",color:"#667eea"}),a[6]||(a[6]=e("span",{class:"info-label"},"项目地点：",-1)),e("span",we,v(d.value.location),1)]),e("div",xe,[o(l,{name:"clock-o",color:"#667eea"}),a[7]||(a[7]=e("span",{class:"info-label"},"完成时间：",-1)),e("span",je,v(d.value.date),1)])]),e("div",Ce,[a[8]||(a[8]=e("h3",{class:"section-title"},"案例介绍",-1)),e("p",De,v(d.value.fullDescription||d.value.description),1)]),d.value.highlights?(t(),c("div",Te,[a[9]||(a[9]=e("h3",{class:"section-title"},"项目亮点",-1)),(t(!0),c(j,null,C(d.value.highlights,(n,s)=>(t(),c("div",{class:"highlight-item",key:s},[o(l,{name:"passed",color:"#667eea"}),e("span",null,v(n),1)]))),128))])):L("",!0)])):L("",!0)]),_:1},8,["show"])])}}},Re=W(Ve,[["__scopeId","data-v-60e43ee2"]]);export{Re as default};
