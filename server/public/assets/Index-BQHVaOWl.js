import{a as N}from"./index-ngrFHoWO.js";import{_ as w,g as k,k as x,a as i,b as u,h as e,r as l,d as T,w as p,f as v,F as $,i as b,s as S,o as c,t as n}from"./index-Dm6bEu_Y.js";import{s as C}from"./function-call-BLKNEYCR.js";const D={class:"applications-page page-container"},I={class:"content-wrapper"},B={key:1,class:"application-list"},P=["onClick"],F={class:"card-header"},V={class:"service-info"},L={class:"service-name"},z={class:"apply-time"},E={class:"card-content"},J={class:"info-row"},M={class:"value"},O={class:"info-row"},j={class:"value"},q={class:"info-row"},A={class:"value"},G={__name:"Index",setup(H){const r=k([]),m=async()=>{try{const s=localStorage.getItem("user"),t=s?JSON.parse(s):null;if(!t){r.value=[];return}const d={userId:t.id},_=await N.get("/api/list",{params:d});r.value=_.data.map(a=>({id:a.id,applyNo:a.orderNo||a.id,serviceName:a.serviceName||"未知服务",status:a.status||"待处理",contactName:a.contactName,contactPhone:a.contactPhone,applyTime:a.applyTime||new Date(a.createTime).toLocaleString()}))}catch(s){S("获取申请记录失败"),console.error(s)}};x(()=>{m()});const h=s=>s.includes("完成")||s.includes("成功")?"success":s.includes("处理")?"primary":s.includes("联系")?"warning":"default",f=s=>s,y=s=>{C({title:"申请详情",message:`
      申请编号：${s.applyNo}
      服务名称：${s.serviceName}
      联系人：${s.contactName}
      联系电话：${s.contactPhone}
      申请时间：${s.applyTime}
      状态：${s.status}
    `.trim()})};return(s,t)=>{const d=l("van-nav-bar"),_=l("van-button"),a=l("van-empty"),g=l("van-tag");return c(),i("div",D,[u(d,{title:"我的申请",fixed:"",placeholder:""}),e("div",I,[r.value.length===0?(c(),T(a,{key:0,description:"暂无申请记录",image:"search"},{default:p(()=>[u(_,{round:"",type:"primary",onClick:t[0]||(t[0]=o=>s.$router.push("/home"))},{default:p(()=>[...t[1]||(t[1]=[v(" 去申请服务 ",-1)])]),_:1})]),_:1})):(c(),i("div",B,[(c(!0),i($,null,b(r.value,o=>(c(),i("div",{key:o.id,class:"application-card card",onClick:K=>y(o)},[e("div",F,[e("div",V,[e("h3",L,n(o.serviceName),1),u(g,{type:h(o.status),size:"small"},{default:p(()=>[v(n(f(o.status)),1)]),_:2},1032,["type"])]),e("div",z,n(o.applyTime),1)]),e("div",E,[e("div",J,[t[2]||(t[2]=e("span",{class:"label"},"申请编号：",-1)),e("span",M,n(o.applyNo),1)]),e("div",O,[t[3]||(t[3]=e("span",{class:"label"},"联系人：",-1)),e("span",j,n(o.contactName),1)]),e("div",q,[t[4]||(t[4]=e("span",{class:"label"},"联系电话：",-1)),e("span",A,n(o.contactPhone),1)])])],8,P))),128))]))])])}}},W=w(G,[["__scopeId","data-v-1cc072e8"]]);export{W as default};
