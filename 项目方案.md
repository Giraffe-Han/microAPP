# 低空综合服务平台项目方案（一期）

**建设单位**：温州低空经济发展有限公司  
**编制日期**：2025年12月

---

## 一、项目概述

### 1.1 项目背景
我公司作为温州地区低空经济发展的重要载体，目前承担着低空飞行服务、无人机应用推广等多项业务。现有业务主要包括物流配送、设备吊运、政务巡检、无人机培训、低空研学等服务类型。

随着业务量的增长，原有的线下对接、电话登记模式在效率和管理上遇到了瓶颈：
- 用户咨询和申请分散在电话、微信群等多个渠道，信息容易遗漏
- 业务受理流程不够规范，缺乏统一的记录和追踪
- 优秀案例和服务能力展示不足，影响业务推广
- 管理人员难以及时掌握业务数据和运营情况

为此，我们启动了**低空综合服务平台一期建设**，通过搭建移动端应用，把分散的业务流程整合到线上，方便用户申请服务、查看案例，也便于我们内部管理和统计。

### 1.2 一期建设目标
本次一期建设重点解决以下问题：

1. **建立统一服务入口**  
   通过 H5 网页和微信小程序，让用户能在手机上直接浏览服务、提交申请，不再依赖线下沟通。

2. **规范业务受理流程**  
   用户在线填写申请表单，系统自动记录和分类，管理人员在后台统一处理，避免信息遗漏。

3. **展示典型应用案例**  
   把已完成的优秀案例（如泰顺杨梅采摘配送、江心屿应急演练等）整理上线，用于对外宣传和业务推广。

4. **支持后台管理**  
   为管理人员提供订单管理、案例管理、用户管理等功能，提升内部运营效率。

### 1.3 项目定位与后续规划
**一期定位**：搭建基础服务平台，实现核心业务线上化，验证用户需求和使用习惯。

**后续规划**：
- **二期**：对接无人机调度系统，实现实时监控和智能派单
- **三期**：引入在线支付、用户积分、会员体系等商业化功能
- **长期**：建设区域低空服务数据中心，为政府监管和行业发展提供数据支撑

---

## 二、技术实现方案

### 2.1 总体思路
考虑到一期建设的实际情况，我们采用了**轻量化、快速上线**的技术路线：

**用户端**：开发 H5 网页应用，通过微信小程序的 web-view 组件嵌入，这样可以：
- 一套代码同时支持浏览器访问和小程序访问
- 后续迭代更新不需要重新提交小程序审核
- 降低开发成本，加快上线速度

**管理端**：后台管理功能集成在同一个 H5 应用中，管理员通过账号权限区分。

**数据存储**：一期采用 JSON 文件存储，方便备份和迁移，待二期业务量上来后再升级为 MySQL 数据库。

### 2.2 技术选型说明

#### 前端部分
- **Vue 3 + Vant 组件库**：Vue 是目前主流的前端框架，Vant 专为移动端设计，组件丰富且符合国内用户习惯
- **Vite 构建工具**：比传统 Webpack 快很多，开发调试效率高
- **Leaflet 地图**：用于服务申请时的地点选择，开源免费

#### 后端部分
- **Node.js + Express**：轻量级后端方案，适合快速开发和部署
- **JSON 文件存储**：一期数据量不大，用文件存储简单可靠，方便备份
- **PM2 进程管理**：保证服务稳定运行，自动重启

#### 部署方案
- **服务器**：安恒云 Linux 服务器（已有）
- **Docker 容器**：前端打包成 Docker 镜像，便于环境隔离和快速部署
- **Nginx 反向代理**：处理 HTTPS 加密、静态文件服务、API 转发
- **域名**：`microapp.wzdkfx.com`（已申请 SSL 证书）

### 2.3 系统架构图
```
用户（手机浏览器/微信小程序）
         ↓ HTTPS 访问
    Nginx 服务器（443端口）
         ├─ 静态页面（H5应用）
         └─ API转发 → Node.js 后端（8090端口）
                          ↓
                    JSON 数据文件
                    上传文件存储
```

### 2.4 为什么这样选型
1. **成本考虑**：一期预算有限，选用开源免费技术栈，无需购买商业软件授权
2. **时间考虑**：Vue + Node.js 技术栈成熟，开发周期短，能快速上线验证
3. **扩展考虑**：架构设计预留了升级空间，二期可平滑过渡到数据库、原生小程序等方案
4. **维护考虑**：技术栈简单，后续维护成本低，不依赖特定开发人员

---

## 三、功能模块

### 3.1 前台用户端

#### 3.1.1 首页模块
- **轮播横幅**：展示平台特色服务和活动信息
- **快捷服务**：
  - 飞行服务（外部链接）
  - 外卖配送
  - 物流配送
  - 设备吊运
  - 无人机培训
  - 低空研学
  - 政务巡检
  - 更多服务
- **服务推荐**：展示热门服务项目
- **案例展示**：优秀案例快速入口
- **配送专区**：无人机配送服务介绍

#### 3.1.2 服务模块
- **服务列表**：展示所有可用服务类型
- **服务详情**：查看服务介绍、价格、适用场景
- **在线申请**：
  - 表单填写（姓名、联系方式、服务类型等）
  - 地图选点（起点、终点、作业区域）
  - 文件上传（需求文档、图片等）
  - 实时提交反馈

#### 3.1.3 案例模块
- **分类浏览**：按服务类型筛选案例
- **案例详情**：
  - 图文介绍
  - 视频展示
  - 项目参数
  - 应用效果
- **静态案例预加载**：确保核心案例快速展示
- **动态案例加载**：从后台获取最新案例

#### 3.1.4 个人中心
- **用户信息**：头像、昵称、联系方式
- **订单统计**：
  - 待处理订单
  - 进行中订单
  - 已完成订单
- **订单管理**：查看订单详情和状态
- **后台管理入口**（仅管理员可见）
- **关于平台**：平台介绍和联系方式

### 3.2 后台管理端

#### 3.2.1 订单管理
- 查看所有用户提交的服务申请
- 订单状态更新（待处理/进行中/已完成）
- 订单详情查看和导出

#### 3.2.2 案例管理
- 案例新增、编辑、删除
- 图片/视频上传
- 案例分类管理
- 案例排序和推荐

#### 3.2.3 用户管理
- 用户列表查看
- 用户角色管理（普通用户/管理员）
- 用户权限控制

---

## 四、核心特性

### 4.1 移动端优化
- **响应式设计**：适配各种屏幕尺寸
- **触控优化**：手势操作流畅自然
- **性能优化**：
  - 图片懒加载
  - 路由懒加载
  - Gzip 压缩
  - 资源缓存策略

### 4.2 用户体验
- **Alipay 风格 UI**：简洁现代的界面设计
- **下拉刷新**：实时获取最新数据
- **上拉加载**：无限滚动加载更多内容
- **加载动画**：友好的等待提示
- **错误处理**：完善的异常提示机制

### 4.3 安全保障
- **HTTPS 加密**：全站 SSL/TLS 加密传输
- **权限控制**：基于角色的访问控制
- **数据验证**：前后端双重数据校验
- **文件上传安全**：文件类型和大小限制

### 4.4 微信小程序集成
- **Web-view 嵌入**：H5 应用无缝集成到小程序
- **域名备案**：支持微信小程序域名验证
- **业务域名配置**：满足小程序安全要求
- **开发调试模式**：支持本地开发测试

---

## 五、部署方案

### 5.1 部署流程

#### 阶段一：环境准备
1. 服务器采购和配置（已完成）
2. 域名申请和备案（进行中）
3. SSL 证书申请（已完成）
4. Docker 环境安装（已完成）

#### 阶段二：应用部署
1. **后端部署**：
   ```bash
   # 安装依赖
   cd server && npm install
   
   # 启动服务（PM2 管理）
   pm2 start index.js --name low-altitude-api
   ```

2. **前端部署**：
   ```bash
   # 构建生产版本
   cd h5-platform && npm run build
   
   # Docker 镜像构建
   docker build -t low-altitude-h5 .
   
   # 启动容器
   docker run -d \
     --name lacomnginx1 \
     -p 80:80 -p 443:443 \
     -v /usr/web/nginx/nginx.conf:/etc/nginx/nginx.conf \
     -v /data/low-altitude/cert:/etc/nginx/cert \
     low-altitude-h5
   ```

#### 阶段三：网络配置
1. 配置安全组规则（开放 80、443 端口）
2. 配置 DNS 解析（域名指向服务器 IP）
3. 配置 Nginx 反向代理
4. 验证 HTTPS 访问

#### 阶段四：小程序发布
1. 微信小程序注册和认证
2. 业务域名配置和验证
3. 小程序代码上传和审核
4. 正式发布上线

### 5.2 运维监控
- **日志管理**：
  - Nginx 访问日志和错误日志
  - 应用运行日志（PM2）
  - Docker 容器日志
- **性能监控**：
  - 服务器资源使用率
  - 应用响应时间
  - 接口调用统计
- **备份策略**：
  - 数据库定期备份
  - 代码版本控制（Git）
  - 配置文件备份

---

## 六、一期建设进度

### 6.1 已完成的工作（截至12月）

**1. 应用开发**
- 前端页面：首页、服务列表、案例展示、个人中心、后台管理等核心页面已完成
- 后端接口：用户登录注册、服务申请提交、案例管理、订单管理等接口已开发并测试
- 案例内容：已整理上线泰顺杨梅配送、江心屿应急演练等典型案例

**2. 服务器部署**
- 已在安恒云服务器上完成环境搭建（Docker、Nginx、Node.js）
- 应用已打包部署，内网测试正常
- SSL 证书已申请并配置，服务器本地 HTTPS 访问验证通过

**3. 小程序对接**
- 已注册微信小程序并完成开发者认证
- Web-view 嵌入方式已调试完成
- 本地开发环境下小程序可正常加载 H5 页面

### 6.2 当前进展与问题

**进行中的工作**：
1. **域名备案**：`microapp.wzdkfx.com` 正在进行微信业务域名验证，需要在域名根目录放置验证文件
2. **网络配置**：HTTPS (443端口) 外网访问受云平台安全策略限制，正在协调安恒云开通相关规则

**遇到的问题**：
- 服务器内部 HTTPS 测试正常，但外网访问 443 端口时连接被重置
- 初步判断是云平台 WAF 或安全组策略导致，已提交工单处理
- 目前 HTTP (80端口) 访问正常，可作为临时方案

### 6.3 下一步计划

**近期（1-2周）**：
- 完成域名备案和 HTTPS 外网访问调试
- 小程序提交审核并正式发布
- 编写用户操作手册和管理员使用文档

**后续优化**：
- 根据试运行反馈优化界面和流程
- 补充更多服务案例内容
- 完善数据统计和导出功能

---

## 七、一期建设成果

### 7.1 解决的核心问题
1. **统一了服务入口**：用户不再需要通过多个渠道咨询，手机上就能完成服务浏览和申请
2. **规范了业务流程**：申请信息统一记录，管理人员可在后台集中处理，避免遗漏
3. **展示了服务能力**：通过案例展示，让潜在客户直观了解我们的服务水平
4. **提升了管理效率**：后台可以查看所有订单、更新案例、管理用户，比以前方便很多

### 7.2 技术方案的优势
1. **开发成本低**：采用开源技术栈，无需购买商业软件，开发周期短
2. **部署简单**：Docker 容器化部署，环境问题少，出问题也容易恢复
3. **维护方便**：代码结构清晰，后续功能迭代或问题修复都比较容易
4. **扩展性好**：为二期升级预留了接口，可以平滑过渡到更复杂的系统

### 7.3 用户体验设计
1. **移动端优化**：界面适配手机屏幕，操作符合手机使用习惯
2. **流程简化**：申请服务只需填写必要信息，减少用户操作步骤
3. **信息清晰**：案例展示图文并茂，服务介绍一目了然
4. **多端支持**：浏览器和微信小程序都能访问，用户选择灵活

---

## 八、需要关注的问题

### 8.1 技术层面
**1. 服务器性能**  
一期采用单服务器部署，如果后续访问量大幅增加，可能出现响应变慢的情况。  
**应对**：先通过监控观察实际负载，必要时升级服务器配置或增加负载均衡。

**2. 数据存储**  
目前用 JSON 文件存储，数据量大了以后查询会慢。  
**应对**：二期升级到 MySQL 数据库，现有数据可以通过脚本迁移。

**3. 网络安全**  
目前已配置 HTTPS 和基础防火墙，但没有专门的安全防护。  
**应对**：定期更新系统补丁，关注安全日志，必要时接入云平台的 WAF 服务。

### 8.2 业务层面
**1. 域名备案进度**  
微信小程序要求业务域名必须备案，目前正在走流程。  
**应对**：已提前准备验证文件，积极配合备案要求，争取尽快通过。

**2. 用户使用习惯**  
平台刚上线，用户可能还不习惯线上申请，初期使用量可能不高。  
**应对**：做好用户引导和培训，前期可以线上线下并行，逐步过渡。

**3. 服务质量保障**  
线上申请后，线下服务质量如果跟不上，会影响平台口碑。  
**应对**：建立反馈机制，及时响应用户问题，持续优化服务流程。

### 8.3 运维层面
**1. 服务稳定性**  
服务器故障或程序崩溃会导致平台无法访问。  
**应对**：已配置 PM2 自动重启，定期检查服务状态，建立应急预案。

**2. 数据备份**  
数据文件如果损坏或误删，会造成业务数据丢失。  
**应对**：每天自动备份数据文件到其他目录，重要节点手动备份到本地。

**3. 证书续期**  
SSL 证书有效期到 2026 年 3 月，到期前需要续期。  
**应对**：提前 1 个月设置提醒，及时申请新证书并更新。

---

## 九、二三期建设展望

### 9.1 二期重点（预计 2026 年上半年）
**核心目标**：提升系统性能和业务深度

**计划内容**：
- **数据库升级**：从 JSON 文件迁移到 MySQL，支持更复杂的查询和统计
- **调度系统对接**：与无人机飞控系统打通，实现订单自动派单和实时监控
- **支付功能**：接入微信支付，支持用户在线下单付款
- **数据分析**：增加业务数据统计和可视化报表，辅助经营决策

### 9.2 三期规划（预计 2026 年下半年）
**核心目标**：拓展服务场景和用户规模

**计划内容**：
- **原生小程序**：开发微信原生小程序，提升性能和用户体验
- **会员体系**：引入积分、优惠券、会员等级等运营功能
- **多端覆盖**：开发 iOS/Android App，覆盖更多用户群体
- **智能推荐**：根据用户需求和历史记录，智能推荐合适的服务

### 9.3 长期愿景
将平台打造成**温州地区低空服务的统一入口**，不仅服务我公司业务，也为其他低空服务企业提供接入能力，形成区域低空服务生态。同时积累的业务数据可以为政府监管和行业发展提供参考依据。

---

## 十、总结

低空综合服务平台一期建设已基本完成，实现了从线下到线上的业务转型。平台采用轻量化技术方案，开发周期短、成本可控，核心功能已经具备。

**目前状态**：
- 应用开发和服务器部署已完成
- 内网测试和功能验证已通过
- 正在解决域名备案和外网访问的最后问题

**下一步工作**：
- 完成 HTTPS 外网访问调试（协调云平台开通 443 端口）
- 完成微信业务域名验证和小程序发布
- 试运行并收集用户反馈，为二期建设做准备

通过这个平台，我们把分散的业务流程整合到了线上，用户申请更方便，我们管理更高效。一期先把基础打好，后续再根据实际使用情况逐步完善功能、提升性能。

---

## 附录

### A. 平台访问信息
- **域名**：`microapp.wzdkfx.com`
- **H5 访问路径**：`/low-altitude/`
- **后台管理路径**：`/low-altitude/admin`
- **管理员测试账号**：`wzdkjjfzyxgs` / `admin`

### B. 技术文档位置
- 服务器部署文档：`server/部署说明.md`
- 项目详细说明：`项目说明.md`
- 本地开发指南：`启动指南.md`

### C. 服务器信息
- **云服务商**：安恒云
- **服务器 IP**：39.172.120.254
- **已开放端口**：80 (HTTP)
- **待开放端口**：443 (HTTPS)

---

**编制单位**：温州低空经济发展有限公司  
**文档版本**：v1.0  
**编制日期**：2025年12月
